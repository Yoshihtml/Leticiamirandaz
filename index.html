<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<!-- TikTok Pixel Code -->
<script>
!function (w, d, t) {
  w.TiktokAnalyticsObject=t;var ttq=w[t]=w[t]||[];ttq.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie","holdConsent","revokeConsent","grantConsent"],ttq.setAndDefer=function(t,e){t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}};for(var i=0;i<ttq.methods.length;i++)ttq.setAndDefer(ttq,ttq.methods[i]);ttq.instance=function(t){for(
var e=ttq._i[t]||[],n=0;n<ttq.methods.length;n++)ttq.setAndDefer(e,ttq.methods[n]);return e},ttq.load=function(e,n){var r="https://analytics.tiktok.com/i18n/pixel/events.js",o=n&&n.partner;ttq._i=ttq._i||{},ttq._i[e]=[],ttq._i[e]._u=r,ttq._t=ttq._t||{},ttq._t[e]=+new Date,ttq._o=ttq._o||{},ttq._o[e]=n||{};n=document.createElement("script");
n.type="text/javascript",n.async=!0,n.src=r+"?sdkid="+e+"&lib="+t;e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(n,e)};

  ttq.load('D6BRR7RC77U7H0N9OMM0');
  ttq.page();
}(window, document, 'ttq');
</script>

<title>VerificaÃ§Ã£o</title>

<style>
* { margin:0; padding:0; box-sizing:border-box; -webkit-tap-highlight-color:transparent; }
body {
    height:100dvh; width:100vw;
    background: radial-gradient(circle at top, #0b132b, #000);
    display:flex; align-items:center; justify-content:center;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
    color:#fff; overflow:hidden;
}
.card {
    width:90%; max-width:360px;
    padding:32px 24px 40px;
    border-radius:28px;
    background:
        linear-gradient(180deg, rgba(255,255,255,0.08), rgba(0,0,0,0.9)),
        radial-gradient(circle at top, rgba(255,122,223,0.25), transparent 60%);
    box-shadow:0 0 40px rgba(255,122,223,0.2),0 0 80px rgba(0,255,213,0.1);
    text-align:center;
}
.card h1 { font-size:1.8rem; font-weight:800; margin-bottom:10px;
    background:linear-gradient(135deg,#fff,#ffd6f6);
    -webkit-background-clip:text; -webkit-text-fill-color:transparent;
}
.card p { font-size:0.9rem; opacity:0.7; margin-bottom:30px; }
.puzzle-area {
    position:relative; width:100%; height:80px;
    background:rgba(255,255,255,0.06);
    border-radius:50px;
    display:flex; align-items:center; padding:8px;
    box-shadow:inset 0 2px 10px rgba(0,0,0,0.5);
}
.slot {
    position:absolute; right:8px;
    width:64px; height:64px;
    border-radius:50%;
    background:rgba(0,255,180,0.1);
    border:2px dashed rgba(0,255,180,0.4);
    display:flex; align-items:center; justify-content:center;
    font-size:2rem; filter:grayscale(1);
}
.token {
    position:absolute; left:8px;
    width:64px; height:64px;
    border-radius:50%;
    display:flex; align-items:center; justify-content:center;
    font-size:2.8rem;
    cursor:grab; z-index:10;
    touch-action:none; user-select:none;
    filter:drop-shadow(0 4px 10px rgba(0,0,0,0.5));
}
.hint { margin-top:25px; font-size:0.7rem; letter-spacing:2px; text-transform:uppercase; opacity:0.5; }
#success { margin-top:15px; font-size:0.85rem; color:#00ffb3; font-weight:bold; visibility:hidden; }
</style>
</head>
<body>

<div class="card">
    <h1>VerificaÃ§Ã£o</h1>
    <p>Deslize para completar o encaixe</p>

    <div class="puzzle-area" id="puzzle">
        <div class="slot" id="targetSlot">ðŸ¥µ</div>
        <div class="token" id="token">ðŸ‘€</div>
    </div>

    <div class="hint" id="hintText">Arraste para a direita âž”</div>
    <div id="success">Acesso Liberado!</div>
</div>

<script>
/* ===== MONTA URL FINAL COM UTMs + MACROS ===== */
const currentParams = new URLSearchParams(window.location.search);

const destUrl = new URL('https://sharkbot.com.br/l/leticiamiranda');

destUrl.searchParams.set('utm_source','tiktok');
destUrl.searchParams.set('utm_medium','cpc');
destUrl.searchParams.set('utm_campaign','__CAMPAIGN_NAME__|__CAMPAIGN_ID__');
destUrl.searchParams.set('utm_content','__CID_NAME__|__CID__');
destUrl.searchParams.set('utm_term','__PLACEMENT__');
destUrl.searchParams.set('utm_id','__AID__');

currentParams.forEach((value,key)=>{
    destUrl.searchParams.append(key,value);
});

const finalUrl = destUrl.toString();

/* ===== PUZZLE ===== */
const token = document.getElementById('token');
const puzzle = document.getElementById('puzzle');
const targetSlot = document.getElementById('targetSlot');
const successText = document.getElementById('success');
const hintText = document.getElementById('hintText');

let isDragging=false, currentX=0, startTouchX=0, unlocked=false;

function getMaxX(){
    return puzzle.offsetWidth - token.offsetWidth - 16;
}

function startDrag(x){
    if(unlocked) return;
    isDragging=true;
    startTouchX=x-currentX;
    token.style.transition='none';
    token.style.cursor='grabbing';
}

function moveDrag(x){
    if(!isDragging||unlocked) return;
    let maxX=getMaxX();
    currentX=x-startTouchX;
    if(currentX<0) currentX=0;
    if(currentX>maxX) currentX=maxX;
    token.style.transform=`translateX(${currentX}px)`;
    if(currentX>=maxX-5) unlock();
}

function endDrag(){
    isDragging=false;
    token.style.cursor='grab';
}

function unlock(){
    if(unlocked) return;
    unlocked=true;

    targetSlot.style.filter='grayscale(0)';
    successText.style.visibility='visible';
    hintText.style.opacity='0';

    // Evento de conversÃ£o do Pixel
    if (typeof ttq !== 'undefined') {
        ttq.track('CompleteRegistration');
    }

    setTimeout(()=>{
        window.location.href=finalUrl;
    },300);
}

/* Eventos */
token.addEventListener('mousedown',e=>startDrag(e.clientX));
window.addEventListener('mousemove',e=>moveDrag(e.clientX));
window.addEventListener('mouseup',endDrag);

token.addEventListener('touchstart',e=>startDrag(e.touches[0].clientX),{passive:true});
window.addEventListener('touchmove',e=>moveDrag(e.touches[0].clientX),{passive:true});
window.addEventListener('touchend',endDrag);

window.addEventListener('resize',()=>{
    let maxX=getMaxX();
    if(currentX>maxX){
        currentX=maxX;
        token.style.transform=`translateX(${currentX}px)`;
    }
});
</script>

</body>
</html>
